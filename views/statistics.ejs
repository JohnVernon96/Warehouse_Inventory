<% include ./partials/header %>

<div class="row">
    <div class="col-lg-12 statsHeader">
        <p class="lead">This page gives useful information about the contents of the warehouse inventory such as quantity of item categories and number of items added per day.</p>
        <hr>
    </div>
</div>

<div class="row">
    <div class="col-lg-6">
        <h2 id="categoryNumbers">Total #Items: <%= quantity[0].sum %></h2>
    </div>
    <div class="col-lg-6">
        <h2 id="categoryNumbers">Total #Categories: <%= totalCategories[0].count %></h2>
    </div>
</div>

<div class="row">
    <div class="col-lg-12">
        <hr>
    </div>
</div>

<div class="row">
    <div class="col-lg-6">
        <canvas id="barChart" width="400" height="400"></canvas>
    </div>
    <div class="col-lg-6">
        <canvas id="doughnutChart" width="400" height="400"></canvas>
    </div>
</div>

<div class="row">
    <div class="col-lg-12">
        <hr>
    </div>
</div>

<div class="row">
    <div class="col-lg-12">
        <canvas id="lineChart" width="400" height="400"></canvas>
    </div>
</div>

<script type="text/javascript">
    let itemsPerCategories = <%- JSON.stringify(numItemsPerCategory) %>;
    let totalCategories = <%- JSON.stringify(totalCategories) %>;
    let quantity = <%- JSON.stringify(quantity) %>;
    let dates = <%- JSON.stringify(dates) %>;

    console.log(dates);

    labelsArray = itemsPerCategories.map(v => {
        return v.category;
    });

    numItemsPerCategory = itemsPerCategories.map(v => {
        return v.count;
    });

    itemsPerDateArray = dates.map(v => {
        return v.count;
    })

    datesArray = dates.map(v => {
        return v.date_recieved;
    })
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>
<script src="../javascript/statistics.js"></script>
<% include ./partials/footer %>
